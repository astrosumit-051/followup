# Cordiq Staging Environment Configuration
# Copy this file to .env.staging and fill in the values
# Last Updated: 2025-11-05

#==============================================
# ENVIRONMENT
#==============================================
NODE_ENV=staging

#==============================================
# DATABASE (Production PostgreSQL)
#==============================================
# Option 1: Supabase PostgreSQL (Recommended)
DATABASE_URL=postgresql://postgres:YOUR_PASSWORD@db.YOUR_PROJECT_REF.supabase.co:5432/postgres

# Option 2: AWS RDS PostgreSQL
# DATABASE_URL=postgresql://cordiq_admin:YOUR_PASSWORD@cordiq-staging.xxxxx.us-east-1.rds.amazonaws.com:5432/cordiq_staging

# Option 3: Railway/Render PostgreSQL
# DATABASE_URL=postgresql://user:password@host:5432/dbname

#==============================================
# SUPABASE AUTHENTICATION
#==============================================
# Get from: https://supabase.com/dashboard/project/YOUR-PROJECT-REF/settings/api
SUPABASE_URL=https://YOUR-PROJECT-REF.supabase.co
SUPABASE_JWT_SECRET=your-jwt-secret-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

#==============================================
# APPLICATION URLS
#==============================================
# Frontend URL (for CORS configuration)
# Vercel: https://cordiq-staging.vercel.app
# Custom domain: https://staging.cordiq.com
FRONTEND_URL=https://cordiq-staging.vercel.app

# Backend API URL
# Railway: https://cordiq-api-staging.up.railway.app
# Render: https://cordiq-api-staging.onrender.com
# Custom domain: https://api-staging.cordiq.com
APP_URL=https://cordiq-api-staging.up.railway.app

# Next.js Public API URL (used by frontend to connect to backend)
NEXT_PUBLIC_API_URL=https://cordiq-api-staging.up.railway.app

#==============================================
# REDIS CACHE
#==============================================
# Option 1: Railway Redis Add-on (Recommended)
REDIS_URL=redis://default:password@redis.railway.internal:6379

# Option 2: Upstash Redis (Serverless)
# REDIS_URL=rediss://default:password@your-redis.upstash.io:6379

# Option 3: Self-hosted Redis
# REDIS_URL=redis://your-staging-redis-host:6379

#==============================================
# AWS S3 (Email Attachments)
#==============================================
# Create a separate staging bucket: cordiq-attachments-staging
# See docs/S3_ATTACHMENT_SETUP.md for setup instructions
AWS_REGION=us-east-1
S3_BUCKET=cordiq-attachments-staging
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

#==============================================
# GMAIL OAUTH (Email Sending)
#==============================================
# Get from: https://console.cloud.google.com/apis/credentials
# IMPORTANT: Add staging redirect URI to Google OAuth client:
#   https://your-staging-api-url/api/auth/gmail/callback
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_REDIRECT_URI=https://cordiq-api-staging.up.railway.app/api/auth/gmail/callback

# Generate with: openssl rand -hex 32
# CRITICAL: Use different key than production
ENCRYPTION_KEY=your-64-character-hex-encryption-key-for-staging

#==============================================
# AI PROVIDERS (Email Generation)
#==============================================
# OpenRouter (Primary - unified access to multiple LLMs)
# Get from: https://openrouter.ai/keys
OPENROUTER_API_KEY=your-openrouter-api-key-here

# Google Gemini (Primary AI Provider)
# Get from: https://aistudio.google.com/app/apikey
# Recommended: Free tier available
GEMINI_API_KEY=your-gemini-api-key-here

# OpenAI (Fallback Provider)
# Get from: https://platform.openai.com/api-keys
# Optional: Use for fallback or specific features
OPENAI_API_KEY=your-openai-api-key-here

# Anthropic Claude (Fallback Provider)
# Get from: https://console.anthropic.com/settings/keys
# Optional: Use for fallback or specific features
ANTHROPIC_API_KEY=your-anthropic-api-key-here

#==============================================
# APPLICATION CONFIGURATION
#==============================================
# API Server Port
PORT=4000

#==============================================
# SECURITY & MONITORING
#==============================================
# Rate limiting (requests per minute)
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# Enable detailed logging for debugging
LOG_LEVEL=info

# Sentry Error Tracking (Optional but recommended)
# Get from: https://sentry.io
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

#==============================================
# GRAPHQL CONFIGURATION
#==============================================
# Disable playground in staging for security
GRAPHQL_PLAYGROUND=false
GRAPHQL_INTROSPECTION=false

#==============================================
# NOTES
#==============================================
# 1. Never commit this file with real values
# 2. Use secrets manager for production (AWS Secrets Manager, Vault)
# 3. Rotate credentials regularly (every 90 days)
# 4. Test all integrations in staging before promoting to production
# 5. Monitor costs for AWS S3, AI providers, and database

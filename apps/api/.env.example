# Supabase Configuration (Backend)
# Get these values from: https://supabase.com/dashboard/project/YOUR-PROJECT-REF/settings/api

# Your Supabase project URL (same as frontend, e.g., https://abcdefghijklmno.supabase.co)
SUPABASE_URL=https://YOUR-PROJECT-REF.supabase.co

# JWT secret for verifying Supabase auth tokens
# Found in: Settings > API > JWT Settings > JWT Secret
SUPABASE_JWT_SECRET=your-jwt-secret-here

# Service role key (KEEP SECRET - has admin access, bypasses RLS)
# Found in: Settings > API > service_role key (click "Reveal")
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Database Connection
# Get from: Settings > Database > Connection string > URI (with password)
# Replace [YOUR-PASSWORD] with your database password
DATABASE_URL=postgresql://postgres:YOUR_DB_PASSWORD@db.YOUR_PROJECT_REF.supabase.co:5432/postgres

# Application Configuration
# Server port (optional, defaults to 3001)
PORT=3001

# Frontend URL for CORS configuration
# For development: http://localhost:3000
# For production: https://your-production-domain.com
# Multiple origins: https://domain1.com,https://domain2.com
FRONTEND_URL=http://localhost:3000

# OpenRouter API Configuration (for AI email generation)
# Get your API key from: https://openrouter.ai/keys
# OpenRouter provides unified access to multiple LLM providers (OpenAI, Anthropic, Google, etc.)
OPENROUTER_API_KEY=your-openrouter-api-key-here

# LangChain AI Provider API Keys (for email template generation)
# OpenAI API Key - Get from: https://platform.openai.com/api-keys
# Used for GPT-4 Turbo (primary provider for email generation)
OPENAI_API_KEY=your-openai-api-key-here

# Anthropic API Key - Get from: https://console.anthropic.com/settings/keys
# Used for Claude 3.5 Sonnet (fallback provider for email generation)
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Google Gemini API Key - Get from: https://aistudio.google.com/app/apikey
# Used for Gemini 2.0 Flash (primary provider for email generation)
GEMINI_API_KEY=your-gemini-api-key-here

# Application URL (used for OpenRouter API headers)
# For development: http://localhost:3001
# For production: https://api.your-production-domain.com
APP_URL=http://localhost:3001

# Redis Configuration (for caching LLM responses)
# For development with Docker Compose: redis://localhost:6379
# For production: Use managed Redis service URL
REDIS_URL=redis://localhost:6379
# Alternative: specify host and port separately
# REDIS_HOST=localhost
# REDIS_PORT=6379

# AWS S3 Configuration (for email attachment storage)
# Get your AWS credentials from: https://console.aws.amazon.com/iam/
# See docs/S3_ATTACHMENT_SETUP.md for detailed setup instructions
AWS_REGION=us-east-1
S3_BUCKET=cordiq-attachments-dev
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# Gmail OAuth Configuration (for email sending via Gmail)
# Get your credentials from: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID (Web application)
# 2. Add authorized redirect URI: http://localhost:3001/gmail/callback (development)
#    For production: https://api.your-production-domain.com/gmail/callback
# 3. Copy Client ID, Client Secret
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3001/gmail/callback

# Encryption key for Gmail OAuth tokens (32 bytes / 64 hex characters)
# Generate with: openssl rand -hex 32
# CRITICAL: Store securely, rotating this key will invalidate all Gmail connections
ENCRYPTION_KEY=your-64-character-hex-encryption-key-here

# Instructions:
# 1. Copy this file to .env: cp .env.example .env
# 2. Go to your Supabase project dashboard
# 3. Navigate to Settings > API
# 4. Copy the "Project URL" to SUPABASE_URL
# 5. Copy the "JWT Secret" to SUPABASE_JWT_SECRET (under JWT Settings)
# 6. Copy the "service_role" key to SUPABASE_SERVICE_ROLE_KEY (click Reveal)
# 7. Navigate to Settings > Database
# 8. Copy the connection string (URI format) to DATABASE_URL
# 9. Replace [YOUR-PASSWORD] with your actual database password
# 10. Set FRONTEND_URL to your Next.js application URL (for CORS)
# 11. Go to https://openrouter.ai/keys to get your OpenRouter API key
# 12. Copy the API key to OPENROUTER_API_KEY
# 13. Go to https://platform.openai.com/api-keys to get your OpenAI API key
# 14. Copy the API key to OPENAI_API_KEY
# 15. Go to https://console.anthropic.com/settings/keys to get your Anthropic API key
# 16. Copy the API key to ANTHROPIC_API_KEY
# 17. Go to https://aistudio.google.com/app/apikey to get your Google Gemini API key
# 18. Copy the API key to GEMINI_API_KEY
# 19. Set APP_URL to your backend API URL (for OpenRouter headers)
# 20. Follow docs/S3_ATTACHMENT_SETUP.md to create S3 bucket and get AWS credentials
# 21. Copy AWS region to AWS_REGION (e.g., us-east-1)
# 22. Copy S3 bucket name to S3_BUCKET (e.g., cordiq-attachments-dev)
# 23. Copy IAM access key ID to AWS_ACCESS_KEY_ID
# 24. Copy IAM secret access key to AWS_SECRET_ACCESS_KEY
# 25. Go to https://console.cloud.google.com/apis/credentials to set up Gmail OAuth
# 26. Create OAuth 2.0 Client ID (Web application type)
# 27. Add authorized redirect URI: http://localhost:3001/gmail/callback
# 28. Copy Client ID to GOOGLE_CLIENT_ID
# 29. Copy Client Secret to GOOGLE_CLIENT_SECRET
# 30. Set GOOGLE_REDIRECT_URI to http://localhost:3001/gmail/callback
# 31. Generate encryption key: openssl rand -hex 32
# 32. Copy the generated 64-character hex string to ENCRYPTION_KEY
#
# Note: At least one AI provider API key (GEMINI_API_KEY, OPENAI_API_KEY, or ANTHROPIC_API_KEY) is required.
# Gemini is recommended as the primary provider (free tier available), with OpenAI and Anthropic as fallbacks.
# AWS S3 credentials are required for email attachment functionality.
# Gmail OAuth credentials are required for email sending functionality.
